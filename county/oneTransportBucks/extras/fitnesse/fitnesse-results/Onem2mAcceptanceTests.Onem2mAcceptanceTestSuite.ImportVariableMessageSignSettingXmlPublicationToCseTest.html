<html><head><title>Onem2mAcceptanceTests.Onem2mAcceptanceTestSuite.ImportVariableMessageSignSettingXmlPublicationToCseTest</title><meta http-equiv='Content-Type' content='text/html;charset=UTF-8'/><link rel='stylesheet' type='text/css' href='css/fitnesse.css'/><script src='javascript/jquery-1.11.3.min.js' type='text/javascript'></script><script src='javascript/fitnesse.js' type='text/javascript'></script></head><body><header><h2>Onem2mAcceptanceTests.Onem2mAcceptanceTestSuite.ImportVariableMessageSignSettingXmlPublicationToCseTest</h2></header><article><div class="collapsible closed"><ul><li><a href='#' class='expandall'>Expand</a></li><li><a href='#' class='collapseall'>Collapse</a></li></ul>
	<p class="title">Included page: <a href="Onem2mAcceptanceTests.Onem2mAcceptanceTestSuite.SetUp">.Onem2mAcceptanceTests.Onem2mAcceptanceTestSuite.SetUp</a> <a href="Onem2mAcceptanceTests.Onem2mAcceptanceTestSuite.SetUp?edit&amp;redirectToReferer=true&amp;redirectAction=" class="edit">(edit)</a></p>
	<div><table>
	<tr class="slimRowTitle">
		<td>import</td>
	</tr>
	<tr class="slimRowColor0">
		<td><span class="pass">com.interdigital.onem2m.acceptance.fixture</span></td>
	</tr>
	<tr class="slimRowColor1">
		<td><span class="pass">com.interdigital.onem2m.acceptance.fixture.bcccloudamber</span></td>
	</tr>
	<tr class="slimRowColor0">
		<td><span class="pass">com.interdigital.onem2m.acceptance.fixture.xmlpublish</span></td>
	</tr>
	<tr class="slimRowColor1">
		<td><span class="pass">com.interdigital.onem2m.acceptance.fixture.csequery</span></td>
	</tr>
	<tr class="slimRowColor0">
		<td><span class="pass">com.interdigital.onem2m.acceptance.fixture.configure</span></td>
	</tr>
</table>
<br/><br/><table>
	<tr class="slimRowTitle">
		<td colspan="6"><span class="pass">Cse Configuration</span></td>
	</tr>
	<tr class="slimRowTitle">
		<td>name</td>
		<td>resource id</td>
		<td>scheme</td>
		<td>host</td>
		<td>port</td>
		<td>configured?</td>
	</tr>
	<tr class="slimRowColor1">
		<td>ONETCSE01</td>
		<td>ONET-CSE-01</td>
		<td>http</td>
		<td>127.0.0.1</td>
		<td>9011</td>
		<td><span class="pass">true</span></td>
	</tr>
</table>
<br/><br/></div>
</div>
<br/><h1>A variable message sign setting record imported into one2m creates an appropriate structure in the CSE</h1>
<br/>A Buckinhamshire County Council variable message sign setting record imported by a data feed creates the following structure in the CSE<br/><br/><hr/>
<br/><h3>Given a variable message sign setting record imported from BCC:</h3>
<table>
	<tr class="slimRowTitle">
		<td colspan="14"><span class="pass">Variable Message Sign Setting Xml Publication</span></td>
	</tr>
	<tr class="slimRowTitle">
		<td>Supplier National Id</td>
		<td>Publication Time</td>
		<td>Situation Record Id</td>
		<td>Record Type</td>
		<td>Overall Start Time</td>
		<td>Location Reference</td>
		<td>Number Of Characters</td>
		<td>Number Of Rows</td>
		<td>Vms Legend</td>
		<td>Vms Legend</td>
		<td>Vms Legend</td>
		<td>Vms Legend</td>
		<td>Vms Type</td>
		<td>imported?</td>
	</tr>
	<tr class="slimRowColor1">
		<td>Buckinghamshire County</td>
		<td>2016-03-08T12:54:54+00:00</td>
		<td>GUIDBUCK-3</td>
		<td>VariableMessageSignSetting</td>
		<td>2016-03-08T01:15:02</td>
		<td>VMSBUCK-3</td>
		<td>16</td>
		<td>4</td>
		<td>Major Works</td>
		<td>Bierton Rd</td>
		<td>by prison</td>
		<td>7-25 Mar</td>
		<td>other</td>
		<td><span class="pass">true</span></td>
	</tr>
</table>
<br/><h3>And an Application Entity in the CSE:</h3>
<table>
	<tr class="slimRowTitle">
		<td colspan="2"><span class="pass">Ae Configuration</span></td>
	</tr>
	<tr class="slimRowTitle">
		<td>name</td>
		<td>configured?</td>
	</tr>
	<tr class="slimRowColor1">
		<td>C-BCCSignSettingFeedImport</td>
		<td><span class="pass">true</span></td>
	</tr>
</table>
<br/><br/><h3>Then the following containers and values should be created in the CSE:</h3>
<table>
	<tr class="exception closed">
		<td class="error"><span class="pass">Query:Check Cse Container Json Content</span></td>
		<td colspan="2" class="error"></td>
	</tr><tr class="exception-detail closed-detail"><td colspan="3"><pre>__EXCEPTION__:java.lang.IllegalArgumentException: dataContainer must be set
	at com.interdigital.onem2m.client.ContentInstanceServiceImpl.getLatest(ContentInstanceServiceImpl.java:207) [onem2m-client-1.5.0-SNAPSHOT.jar]
	at com.interdigital.onem2m.acceptance.systemundertest.CseClient.getCseContainerContentValue(CseClient.java:148) [file:/var/lib/jenkins/workspace/nightly-acceptance-test-runner/target/classes/]
	at com.interdigital.onem2m.acceptance.systemundertest.CseClient.getCseContainerValues(CseClient.java:161) [file:/var/lib/jenkins/workspace/nightly-acceptance-test-runner/target/classes/]
	at com.interdigital.onem2m.acceptance.systemundertest.BasicOnem2mSystem.getCseContainerValues(BasicOnem2mSystem.java:180) [file:/var/lib/jenkins/workspace/nightly-acceptance-test-runner/target/classes/]
	at com.interdigital.onem2m.acceptance.fixture.csequery.CheckCseContainerJsonContent.query(CheckCseContainerJsonContent.java:50) [file:/var/lib/jenkins/workspace/nightly-acceptance-test-runner/target/classes/]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.8.0_74]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) [rt.jar:1.8.0_74]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.8.0_74]
	at java.lang.reflect.Method.invoke(Method.java:498) [rt.jar:1.8.0_74]
	at fitnesse.slim.fixtureInteraction.DefaultInteraction.methodInvoke(DefaultInteraction.java:81) [fitnesse-20151230.jar]
	at fitnesse.slim.MethodExecutor.callMethod(MethodExecutor.java:57) [fitnesse-20151230.jar]
	at fitnesse.slim.MethodExecutor.invokeMethod(MethodExecutor.java:38) [fitnesse-20151230.jar]
	at fitnesse.slim.MethodExecutor.findAndInvoke(MethodExecutor.java:72) [fitnesse-20151230.jar]
	at fitnesse.slim.FixtureMethodExecutor.execute(FixtureMethodExecutor.java:20) [fitnesse-20151230.jar]
	at fitnesse.slim.StatementExecutor.getMethodExecutionResult(StatementExecutor.java:135) [fitnesse-20151230.jar]
	at fitnesse.slim.StatementExecutor.call(StatementExecutor.java:108) [fitnesse-20151230.jar]
	at fitnesse.slim.StatementTimeoutExecutor$3.call(StatementTimeoutExecutor.java:90) [fitnesse-20151230.jar]
	at java.util.concurrent.FutureTask.run(FutureTask.java:266) [rt.jar:1.8.0_74]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [rt.jar:1.8.0_74]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [rt.jar:1.8.0_74]
	at java.lang.Thread.run(Thread.java:745) [rt.jar:1.8.0_74]</pre></td></tr>
	<tr class="slimRowTitle">
		<td>Container Path</td>
		<td>Content Value</td>
		<td>Json Matches</td>
	</tr>
	<tr class="slimRowColor1">
		<td>BCCSignSettingFeedImport/VMSBUCK-3/signSetting</td>
		<td> {
    "locationReference": "VMSBUCK-3",
    "numberOfCharacters": "16",
    "numberOfRows": "4",
    "vmsLegends": ["Major Works","Bierton Rd","by prison","7-25 Mar"],
    "vmsType": "other"
} </td>
		<td>true</td>
	</tr>
</table>
<br/><br/><h3>And the following labels should be added to the CSE for data discovery by location ID:</h3>
<table>
	<tr class="exception closed">
		<td class="error"><span class="pass">Query:Label Query Handler</span></td>
		<td colspan="2" class="error"></td>
	</tr><tr class="exception-detail closed-detail"><td colspan="3"><pre>__EXCEPTION__:java.lang.NullPointerException
	at com.interdigital.onem2m.acceptance.systemundertest.CseClient.getLabels(CseClient.java:169) [file:/var/lib/jenkins/workspace/nightly-acceptance-test-runner/target/classes/]
	at com.interdigital.onem2m.acceptance.systemundertest.BasicOnem2mSystem.getLabelsFor(BasicOnem2mSystem.java:277) [file:/var/lib/jenkins/workspace/nightly-acceptance-test-runner/target/classes/]
	at com.interdigital.onem2m.acceptance.fixture.csequery.LabelQueryHandler.query(LabelQueryHandler.java:48) [file:/var/lib/jenkins/workspace/nightly-acceptance-test-runner/target/classes/]
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) [rt.jar:1.8.0_74]
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) [rt.jar:1.8.0_74]
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) [rt.jar:1.8.0_74]
	at java.lang.reflect.Method.invoke(Method.java:498) [rt.jar:1.8.0_74]
	at fitnesse.slim.fixtureInteraction.DefaultInteraction.methodInvoke(DefaultInteraction.java:81) [fitnesse-20151230.jar]
	at fitnesse.slim.MethodExecutor.callMethod(MethodExecutor.java:57) [fitnesse-20151230.jar]
	at fitnesse.slim.MethodExecutor.invokeMethod(MethodExecutor.java:38) [fitnesse-20151230.jar]
	at fitnesse.slim.MethodExecutor.findAndInvoke(MethodExecutor.java:72) [fitnesse-20151230.jar]
	at fitnesse.slim.FixtureMethodExecutor.execute(FixtureMethodExecutor.java:20) [fitnesse-20151230.jar]
	at fitnesse.slim.StatementExecutor.getMethodExecutionResult(StatementExecutor.java:135) [fitnesse-20151230.jar]
	at fitnesse.slim.StatementExecutor.call(StatementExecutor.java:108) [fitnesse-20151230.jar]
	at fitnesse.slim.StatementTimeoutExecutor$3.call(StatementTimeoutExecutor.java:90) [fitnesse-20151230.jar]
	at java.util.concurrent.FutureTask.run(FutureTask.java:266) [rt.jar:1.8.0_74]
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142) [rt.jar:1.8.0_74]
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617) [rt.jar:1.8.0_74]
	at java.lang.Thread.run(Thread.java:745) [rt.jar:1.8.0_74]</pre></td></tr>
	<tr class="slimRowTitle">
		<td>Container Path</td>
		<td>Labels Contain</td>
		<td>Result</td>
	</tr>
	<tr class="slimRowColor1">
		<td>BCCSignSettingFeedImport/VMSBUCK-3/signSetting</td>
		<td>VMSBUCK-3</td>
		<td>true</td>
	</tr>
	<tr class="slimRowColor0">
		<td>BCCSignSettingFeedImport/VMSBUCK-3/signSetting</td>
		<td>datex2:situationRecord</td>
		<td>true</td>
	</tr>
</table>
<br/><br/><br/><br/><br/><div class="collapsible closed"><ul><li><a href='#' class='expandall'>Expand</a></li><li><a href='#' class='collapseall'>Collapse</a></li></ul>
	<p class="title">Included page: <a href="Onem2mAcceptanceTests.Onem2mAcceptanceTestSuite.TearDown">.Onem2mAcceptanceTests.Onem2mAcceptanceTestSuite.TearDown</a> <a href="Onem2mAcceptanceTests.Onem2mAcceptanceTestSuite.TearDown?edit&amp;redirectToReferer=true&amp;redirectAction=" class="edit">(edit)</a></p>
	<div><table>
	<tr class="slimRowTitle">
		<td colspan="2"><span class="pass">script: clear feed import test</span></td>
	</tr>
	<tr class="slimRowColor8">
		<td><span class="pass">ensure</span></td>
		<td>cloud amber cleared</td>
	</tr>
	<tr class="slimRowColor8">
		<td><span class="pass">ensure</span></td>
		<td>application entity cleared</td>
	</tr>
</table>
</div>
</div>
</article></body></html>